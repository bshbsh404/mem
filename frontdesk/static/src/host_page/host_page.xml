<?xml version="1.0" encoding="UTF-8"?>

<templates xml:space="preserve">
    <t t-name="frontdesk.HostPage">
        <div class="d-flex flex-column justify-content-center">
            <div class="container-fluid">
                <div class="row g-0 d-flex justify-content-center">
                    <div class="col-lg-6">
                        <!-- Error container -->
                        <div t-if="state.errorMessage" class="alert alert-danger" role="alert" id="errorMessage">
                            <t t-esc="state.errorMessage"/>
                        </div>
                        <form t-on-submit.prevent="_onConfirm">
                            <!-- Visit Purpose Field
                            <div class="mt-3">
                                <label for="visit_purpose" class="form-label">Visit Purpose <t><span class="small text-danger">*</span></t></label>
                                <Many2OnePurpose id="purpose" update.bind="selectedPurpose" disableButton.bind="disableButton" stationId="props.stationId" token="props.token" onChange.bind="_onPurposeChange"/>
                            </div>

                            Department Field
                            <div class="mt-3">
                                <label for="department" class="form-label">Department <t><span class="small text-danger">*</span></t></label>
                                <Many2One update.bind="selectedHost" disableButton.bind="disableButton" stationId="props.stationId" token="props.token" departmentFilter="state.filteredDepartments"/>
                            </div> -->

                            <!-- Visit purpose and department fields -->
                            <!-- <div t-if="props.stationInfo.is_online" class="mt-3"> -->
                            <div class="mt-3">
                                <label class="form-label">Visit Type <span class="small text-danger">*</span></label>
                                <div class="form-check">
                                    <input type="radio" id="visitTypeEmployee" name="visitType" value="employee" class="form-check-input" t-on-change="_onVisitTypeChange" t-att-checked="state.visitType === 'employee'"/>
                                    <label class="form-check-label" for="visitTypeEmployee">Employee Visit</label>
                                </div>
                                <div class="form-check">
                                    <input type="radio" id="visitTypeDepartment" name="visitType" value="department" class="form-check-input" t-on-change="_onVisitTypeChange" t-att-checked="state.visitType === 'department'"/>
                                    <label class="form-check-label" for="visitTypeDepartment">Department Visit</label>
                                </div>
                            </div>

                            <Many2One update.bind="selectedHost" disableButton.bind="disableButton" stationId="props.stationId" token="props.token" isOnline="props.stationInfo.is_online" visitType="state.visitType" />
                            
                            <!-- Name fields -->
                            <div t-if="(state.visitType === 'employee')" class="mt-3">
                                <label for="name" class="form-label">Employee Name <t><span class="small text-danger">*</span></t></label>
                                <input type="text" autocomplete="off" class="form-control" required="1" t-att-class="props.theme === 'light' ? '' : 'bg-700 border-0 text-white'" id="name" t-ref="inputName"/>
                            </div>
                            <div t-if="(state.visitType === 'employee') &amp;&amp; props.stationInfo.ask_host_phone !== 'none'" class="mt-3">
                                <label for="phone" class="form-label">Employee Phone Number <t t-if="props.stationInfo.ask_host_phone != 'optional'"><span class="small text-danger">*</span></t></label>
                                <input type="phone" autocomplete="off" class="form-control" t-att-required="props.stationInfo.ask_host_phone === 'required'" t-att-class="props.theme === 'light' ? '' : 'bg-700 border-0 text-white'" id="phone" t-ref="inputPhone"/>
                            </div>
                            <div t-if="(state.visitType === 'employee') &amp;&amp; props.stationInfo.ask_host_landline !== 'none'" class="mt-3">
                                <label for="landline" class="form-label">Employee Landline <t t-if="props.stationInfo.ask_host_landline != 'optional'"><span class="small text-danger">*</span></t></label>
                                <input type="phone" autocomplete="off" class="form-control" t-att-required="props.stationInfo.ask_host_landline === 'required'" t-att-class="props.theme === 'light' ? '' : 'bg-700 border-0 text-white'" id="landline" t-ref="inputLandline"/>
                            </div>

                            <div t-if="(state.visitType === 'employee')" class="mt-3">
                                <label for="email" class="form-label">Employee Email<t><span class="small text-danger">*</span></t></label>
                                <!-- <input type="email" autocomplete="off" class="form-control" required="1" t-att-class="props.theme === 'light' ? '' : 'bg-700 border-0 text-white'" id="email" t-ref="inputEmail"/> -->
                                <div class="input-group">
                                    <input type="text" class="form-control" placeholder="Enter email" id="email" t-ref="inputEmail" required="1"/>
                                    <span t-if="props.stationInfo.email_host_domain" class="input-group-text"><t t-esc="props.stationInfo.email_host_domain" /></span> 
                                </div>
                            </div>

                            <div class="mt-3">
                                <label for="is_recurring" class="form-label">Is Recurring Visit?</label>
                                <input type="checkbox" t-on-change="_onRecurringChange" autocomplete="off" class="form-check-input" t-att-class="props.theme === 'light' ? '' : 'bg-700 border-0 text-white'" id="is_recurring" t-ref="inputIsRecurring"/>
                            </div>
                             <div class="mt-3">
                                <label for="planned_date" class="form-label">Planned Date <t><span class="small text-danger">*</span></t></label>
                                <input type="date" autocomplete="off" class="form-control" required="1" t-att-class="props.theme === 'light' ? '' : 'bg-700 border-0 text-white'" id="planned_date" t-ref="inputPlannedDate" t-att-min="new Date().toISOString().split('T')[0]"/>
                            </div>
                             <div class="mt-3" t-if="state.isRecurring === 'on'">
                                <label for="planned_date_end" class="form-label">Planned End Date <t><span class="small text-danger">*</span></t></label>
                                <input type="date" autocomplete="off" class="form-control" required="1" t-att-class="props.theme === 'light' ? '' : 'bg-700 border-0 text-white'" id="planned_date_end" t-ref="inputPlannedDateEnd"/>
                            </div>

                            <div class="mt-3">
                                <label for="planned_time" class="form-label">Planned Time <t><span class="small text-danger">*</span></t></label>
                                <input type="time" autocomplete="off" class="form-control" required="1" t-att-class="props.theme === 'light' ? '' : 'bg-700 border-0 text-white'" id="planned_time" t-ref="inputPlannedTime"/>
                            </div>
                            <div class="mt-3">
                                <label for="planned_duration" class="form-label">Planned Duration (Minutes) <t><span class="small text-danger">*</span></t></label>
                                <input type="number" autocomplete="off" step="1" min="0" class="form-control" required="1" t-att-class="props.theme === 'light' ? '' : 'bg-700 border-0 text-white'" id="planned_duration" t-ref="inputPlannedDuration"/>
                            </div>
                            <!-- add check button to agree  -->
                            <div class="mt-3">
                                <input type="checkbox" id="check" t-ref="check" t-on-change="_onCheck" class="form-check-input" />
                                <label for="check" class="px-1 form-check-label"> I hereby confirm my information is accurate.</label>
                            </div>
                            <t t-if="props.stationInfo.allow_recaptcha and props and props.currentLang and props.currentLang == 'ar_001'">
                                <script src="https://www.google.com/recaptcha/api.js?hl=ar" async="async" defer="defer"></script>
                            </t>
                            <t t-elif="props.stationInfo.allow_recaptcha">
                                <script src="https://www.google.com/recaptcha/api.js" async="async" defer="defer"></script>
                            </t>
                            <div t-if="props.stationInfo.allow_recaptcha" class="g-recaptcha" data-sitekey="6LfQy7QqAAAAAGzeeD5m3XVNAPT52R92NaX81-uX" style="margin-top: 15px;"></div>


                            <button t-ref="button" class="btn btn-primary mt-3 w-100" disabled="disabled">Confirm</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>
